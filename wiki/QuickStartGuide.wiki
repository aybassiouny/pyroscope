#summary How to get started - installation and first steps.
#labels installation,configuration,cli,web.ui
<wiki:toc max_depth="2" />

= Installing the command line tools =

*WARNING:* Older xmlrpc-c libraries on Ubuntu have a bug regarding integer overflows (causing bigger data sizes like those of Linux distribution DVDs to be misreported), see [http://code.google.com/p/rtgui/wiki/CompilingRtorrent this page] for details on how to fix it. If your installation has that problem, `rtxmlrpc` and `rtcontrol` will emit a warning every time you start them.

== Installing a release version ==
For a working installation, you have to meet these requirements first:
 * Python 2.5 or a higher 2.x version (2.5 is recommended); go to http://www.python.org/download/ if you're on an OS that doesn't have Python out of the box.
 * for `rtcontrol` and `rtxmlrpc`, an existing rTorrent installation, _with the xmlrpc option compiled in_ and the `scgi_local` or `scgi_port` command added to your `~/.rtorrent.rc`.
 * Using rTorrent *0.8.6* is recommended — PyroScope _should_ work together with older versions though, up to a point.

On Ubuntu, do this (tested on Hardy 8.04 LTS):
{{{
sudo aptitude install python-setuptools
sudo easy_install --prefix /usr/local pyrocore
}}}
After that, the CommandLineTools should be immediately available in your shell prompt. 

On Debian or other Debian-based distributions, the same commands should work. For non-Debian distributions, use the appropriate package management tools — the package names should be similar (contain the word "`setuptools`"). If you're unable to find a `setuptools` package for your distribution, download it [http://pypi.python.org/pypi/setuptools/ from here] and install it according to the given instructions. Then use the `easy_install` command shown above to download and install the `pyrocore` package.

On Windows, just use `easy_install pyrocore` in `cmd.exe` after [http://www.python.org/download/ installing Python] and `setuptools` as [http://pypi.python.org/pypi/setuptools/ described here].

After installation, you might want to adapt things to your local setup using the instructions on the UserConfiguration page. You should at least *create a configuration* as described there, using the `pyroadmin --create-config` command. If you encounter any problems during installation not covered by the documentation, join the [http://groups.google.com/group/pyroscope-users pyroscope-users] mailing list to get help from the community.

If `easy_install` prints a message containing `error: bad install directory or PYTHONPATH`, try to use `--prefix /usr` in the above command.

If you like PyroScope after using it for a while, click on the following button to support it.
<wiki:gadget url="http://www.ohloh.net/p/346666/widgets/project_users_logo.xml" height="43"  border="0" />


== Updating to a new release version ==

Remember to *read any [http://code.google.com/p/pyroscope/wiki/UserConfiguration#Updating_your_existing_configuration_for_a_new_software_version migration instructions], and the [http://code.google.com/p/pyroscope/source/browse/trunk/debian/changelog changelog], BEFORE installing any new version*.

Then to *update* an existing installation, use this command:
{{{
sudo easy_install --prefix /usr/local -U pyrocore
}}}


== Installing from source (SVN) ==
If you have experience with the shell prompt and possibly a bit of Python you might want to install the development version to gain early access to new features. Since that version is constantly used in cron jobs, chances that it is unstable at any point in time are slim. Please *monitor the [http://code.google.com/p/pyroscope/source/list SVN log] and the [http://code.google.com/p/pyroscope/source/browse/trunk/debian/changelog changelog]* if you run from source.

Requirements:
 * Python 2.5 or a higher 2.x version (2.5 is recommended).
 * A proper build environment and a subversion client. On Debian and Ubuntu, you'll need the following packages installed:
 {{{
aptitude install python python-virtualenv python-dev
aptitude install build-essential devtools subversion
aptitude install inkscape # ONLY for the web-ui
}}}
 If there are packages missing from that list, leave a comment.
 * For `rtcontrol` and `rtxmlrpc`, an existing rTorrent installation, _with the xmlrpc option compiled in_ and the `scgi_local` or `scgi_port` command added to your `~/.rtorrent.rc`.
 * Using rTorrent *0.8.6* is recommended — PyroScope _should_ work together with older versions though, up to a point.

Initial installation to `~/lib/pyroscope`:
{{{
mkdir -p ~/lib
svn checkout http://pyroscope.googlecode.com/svn/trunk/ ~/lib/pyroscope
cd ~/lib/pyroscope/pyrocore
source bootstrap.sh
ln -nfs ~/lib/pyroscope/bin/{chtor,lstor,mktor,pyroadmin,rtcontrol,rtxmlrpc,rtmv} ~/bin/
}}}

After that, the CommandLineTools are available in the `~/lib/pyroscope/bin` directory, and also added to your user's bin directory.

After installation, you might want to adapt things to your local setup using the instructions on the UserConfiguration page. You should at least *create a configuration* as described there, using the `pyroadmin --create-config` command. If you encounter any problems during installation not covered by the documentation, join the [http://groups.google.com/group/pyroscope-users pyroscope-users] mailing list to get help from the community.

If you want to use the web interface, see "_Installing the web interface_" below — but note that it is _on hold and unsupported_ right now.


== Updating to SVN HEAD ==

*BEFORE any update, read the relevant [http://code.google.com/p/pyroscope/wiki/UserConfiguration#Updating_your_existing_configuration_for_a_new_software_version migration instructions], the [http://code.google.com/p/pyroscope/source/browse/trunk/debian/changelog changelog] and the [http://code.google.com/p/pyroscope/source/list SVN log].*

Then to *update* an existing installation, use these commands:
{{{
cd ~/lib/pyroscope
svn update
( cd pyrocore && source bootstrap.sh )
}}}


== Installing rTorrent and !PyroScope on Debian from source ==
See DebianInstallFromSource.


----
*What follows is the more complex installation of the yet-incomplete web interface and currently has a chance of being broken...*
----

= Installing the web interface =

Currently, the only way to install and use the web interface is from source, so you first need to follow the "_Installing from source (SVN)_" section above. Note that the web-ui is currently unsupported and on hold — if it doesn't work for you, it just doesn't.

_The file system paths in the following sections can be adapted to your installation, of course, but avoid that unless you have a good reason. It's recommended to put the SCGI socket into the `~/lib/rtorrent` directory, just create it if your rTorrent installation is located elsewhere. These instructions work best if PyroScope is installed into the same user account as rTorrent._

== `PyroScope` basic configuration ==
Set up the `pyroscope` subproject, create the `~/.pyroscope` directory and the necessary sub directories.
{{{
cd ~/lib/pyroscope/pyroscope
source bootstrap.sh
mkdir -p ~/.pyroscope/{log,data,www-data}
}}}

== Starting the web interface ==
To use the web server, you first have to make a config file as follows:
{{{
cd ~/lib/pyroscope/pyroscope
../bin/paster make-config pyroscope ~/.pyroscope/web.ini
}}}

Tweak the config file as appropriate (read the comments in the file); if you intend to use the default port 8042 this can be skipped altogether. Then start the web server in daemon mode:
{{{
cd ~/lib/pyroscope/pyroscope
../bin/paver start
}}}
If you did not change the web server parameters, you can now view the start page at http://127.0.0.1:8042/. You can use the `paver status` command to check on the server status, and `paver stop` to stop a running server.

== Updating the WEB-UI to the latest SVN revision ==
To update the software including the web-ui after initial installation, use these commands:
{{{
cd ~/lib/pyroscope
source bin/activate
( cd pyroscope && paver stop )
svn update
( cd pyrocore && source bootstrap.sh )
( cd pyroscope && paver develop -U && paver bootstrap && paver start )
}}}


= Enabling the queue manager =
*NOT IMPLEMENTED YET*

Using `crontab -e`, add the following to your cron schedule:
{{{
* * * * *   test -S ~/lib/rtorrent/.scgi_local && ~/lib/pyroscope/bin/pyro-qm
}}}