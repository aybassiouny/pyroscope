#summary Tempita templating for output formatting.

= Introduction =
One of the output formatting options described on the RtControlExamples page are Tempita templates. Compared to the other options, they offer more versatile formatting because you can use conditionals and loops, e.g. coloring the output based on some value thresholds (see the example below). A full description of the Tempita language can be found in its [http://pythonpaste.org/tempita/ documentation].

Note that in order for them to be recognized as such, Tempita templates *MUST* start with two braces `{{`, use `{{#}}` (an empty template comment) if you want to start the output with some literal text.

= Using Tempita to format single items =
The most common form of using Tempita for formatting a single output item of a `rtcontrol` result is probably by defining it in the configuration as a custom format, so it can be simply used by its name. 

The `colored` predefined format is a typical example:
{{{
colored     = {{default ESC = '\x1B'}}{{d.size|sz}} {{d.uploaded|sz}} {{# 
    }}{{if d.seedtime < 8*7*86400}}{{ESC}}[36m{{d.seedtime|duration}}{{ESC}}[0m{{else}}{{d.seedtime|duration}}{{endif}}{{# 
    }}{{if d.ratio < 0.8}}{{ESC}}[1m{{ESC}}[31m{{elif d.ratio < 1.0}}{{ESC}}[36m{{elif type(d.ratio) is float}}{{ESC}}[32m{{endif}}{{#
    }} {{str(pc(d.ratio)).rjust(8)}}{{chr(37)}}{{if type(d.ratio) is float}}{{ESC}}[0m{{endif}}{{#
    }} {{(d.alias or '').ljust(8)}} {{d.name or ''}}
}}}

The main reason to use Tempita here are the if conditions that color the output depending on threshold values, for the ratio and seed time columns. 
Additionally to what Tempita provides, the global namespace of the template contains the usual format specifiers (see the output of the `--help-fields` option), and the current result item as `d` (think *`d`*ownload item).

Notable here is also the use of a named default value `ESC`, and using template comments `{{#}}` to escape the line endings we don't want to have in the final output, which looks like this:
 https://pyroscope.googlecode.com/svn/trunk/pyrocore/docs/examples/rtcontrol-colors.png


= Using Tempita for full output control =
*TDB*