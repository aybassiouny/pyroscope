#summary Patched and extended rTorrent version.
<wiki:toc max_depth="2" />

= Introduction =

https://pyroscope.googlecode.com/svn/trunk/pyrocore/src/pyrocore/data/img/rt-logo.png <br />
If you follow the [DebianInstallFromSource#rTorrent_installation build instructions] for the extended PyroScope version `rTorrent-PS`, you'll get an alternative rTorrent executable with the following changes:
 # self-contained install into any location of your choosing, including your home directory, offering the ability to run several versions at once (in different client instances).
 # _rpath-linked_ to the major dependencies, so you can upgrade those independently from your distribution's versions.
 # extended command set (exclusive PyroScope patches):
   * sort views by more than one value, and set the sort direction for each of these.
   * bind keys in the root display to any command, e.g. change the built-in views.
   * interface patches adding easily customizable colors, displaying the _tracker domain_, and some more minor modifications to the download list view.
 # show number of registered downloads on the tracker info panel.

http://i.imgur.com/xVSmh.png

rTorrent 0.8.6 to 0.8.8 are supported, but not all patches are applied equally (depending on whether they're needed, or applicable at all).
Note that some of these patches are taken from the [https://aur.archlinux.org/packages/rtorrent-extended/ AUR package] provided for [http://www.archlinux.org/ Arch Linux].


= Command extensions =
The following new commands are available.

<dl>
<dt>
== `compare=order,command1=[,...]` ==
</dt>
<dd>
Compares two items like `less=` or `greater=`, but allows to compare
by several different sort criteria, and ascending or descending
order per given field. 

The first parameter is a string of order
indicators, either `aA+` for ascending or `dD-` for descending. 
The default, i.e. when there's more fields than indicators, is
ascending. Field types other than value or string are treated
as equal (or in other words, they're ignored).
If all fields are equal, then items are ordered in a random, but
stable fashion.

Configuration example:
{{{
# VIEW: Show active and incomplete torrents (in view #9) and update every 20 seconds
#       Items are grouped into complete, incomplete, and queued, in that order.
#       Within each group, they're sorted by upload and then download speed.
view_sort_current = active,"compare=----,d.is_open=,d.get_complete=,d.get_up_rate=,d.get_down_rate="
schedule = filter_active,12,20,"view_filter = active,\"or={d.get_up_rate=,d.get_down_rate=,not=$d.get_complete=}\" ;view_sort=active"
}}}
</dd>

<dt>
== `ui.bind_key=display,key,"command1=[,...]"` ==
</dt>
<dd>
<br /> *⚠ WARNING: This currently can NOT be used immediately when `rtorrent.rc` is parsed, so it has to be scheduled once shortly after startup (see below example).*

Binds the given key on a specified display to execute the commands when pressed.

 * `display` must be equal to `download_list` (currently, no other displays are supported).
 * `key` can be either a single character for normal keys, or `^` plus a character for control keys.

Configuration example:
{{{
# VIEW: Bind view #7 to the "rtcontrol" result
schedule = bind_7,0,0,"ui.bind_key=download_list,7,ui.current_view.set=rtcontrol"
}}}
</dd>

<dt>
== `ui.color.«TYPE».set="«COLOR DEF»"` ==
</dt>
<dd>
These commands allow you to set colors for selected elements of the user interface, in some cases depending on their status. You can either provide colors by specifying the numerical index in the terminal's color table, or by name (for the first 16 colors). The possible color names are "black", "red", "green", "yellow", "blue", "magenta", "cyan", "gray", and "white"; you can use them for both text and background color, in the form "«fg» on «bg»", and you can add "bright" in front of a color to select a more luminous version. If you don't specify a color, the default of your terminal is used.

Also, these additional modifiers can be placed in the color definitions, but it depends on the terminal you're using whether they have an effect: "bold", "standout", "underline", "reverse", "blink", and "dim".

Here's a configuration example showing all the commands and their defaults:

{{{
# UI/VIEW: Colors
ui.color.alarm.set = "bold white on red"
ui.color.complete.set = "green"
ui.color.even.set = ""
ui.color.focus.set = "reverse"
ui.color.footer.set = "bold bright cyan on blue"
ui.color.incomplete.set = "yellow"
ui.color.info.set = "white"
ui.color.label.set = "gray"
ui.color.leeching.set = "bold bright yellow"
ui.color.odd.set = ""
ui.color.seeding.set = "bold bright green"
ui.color.title.set = "bold bright white on blue"
}}}

Note that you might need to enable support for 256 colors in your terminal, see [http://askubuntu.com/questions/67/how-do-i-enable-full-color-support-in-terminal this article] for a description. In a nutshell, you need to install the `ncurses-term` package if you don't have it already, and also add these commands to your rTorrent start script:

{{{
if [ "$TERM" = "${TERM%-256color}" ]; then
    export TERM="$TERM-256color"
fi
}}}

If everything worked so far, and you now want to find you own coloring theme, the easiest way is to use a second shell and `rtxmlrpc`. Try out some colors, and add the combinations you like to your `~/.rtorrent.rc`.

{{{
# For people liking candy stores...
rtxmlrpc ui.color.title.set "bold magenta on bright cyan"
}}}


The [http://pyroscope.googlecode.com/svn/trunk/pyrocore/docs/rtorrent-extended/term-256color.py term-256color] script can help you with showing the colors your terminal supports, an example output using Gnome's terminal looks like the following...

http://i.imgur.com/iu8nY.png

</dd>

</dl>